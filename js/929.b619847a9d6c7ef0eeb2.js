(()=>{var e,o,n={74189:(e,o,n)=>{"use strict";var t=n(45770),r=n(91519),a=n.n(r),i=n(92629),s=n(29550),l=n.n(s),c=n(12883),u=n(85811),f=n.n(u),p=n(1272),g=n(36694).lW;function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,o){if(!e)return;if("string"==typeof e)return v(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,o)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,o){(null==o||o>e.length)&&(o=e.length);for(var n=0,t=new Array(o);n<o;n++)t[n]=e[n];return t}var m=new(l())({allErrors:!0,useDefaults:!0});m.addKeyword({keyword:"example",type:"string"});var h=m.compile(i),y='\n +-------------------------------------------------------------------+ \n | Internal "Heta compiler" error, contact the developers.           | \n | Create an issue: '.concat(c.bugs.url," | \n | or mail to: ").concat(c.bugs.email,"                                      | \n +-------------------------------------------------------------------+ \n"),b=["debug","info","warn","error","panic"];function M(e,o,n){var t=e._container.logger,r=a().resolve(o,e.filepath),i='Exporting to "'.concat(r,'" of format "').concat(e.format,'"...');t.info(i),e.make().forEach((function(e){var o=r+e.pathSuffix;try{n[o]=e.content}catch(e){var a='Heta compiler cannot export to file: "'.concat(o,'": \n\t- ').concat(e.message);t.error(a,{type:"ExportError"})}}))}self.onmessage=function(e){var o=e.data.files;postMessage({action:"console",value:"heta build"});var n=["/platform.json","/platform.json5","/platform.yml"].find((function(e){return o[e]})),r=o[n];if(r){postMessage({action:"console",value:'\nRunning compilation with declaration file "'.concat(n,'"...')});var i=new TextDecoder("utf-8").decode(r);try{var s=(0,p.zD)(i)}catch(e){return postMessage({action:"console",value:"\nDeclaration file must be JSON formatted:"}),postMessage({action:"console",value:"\n\t- ".concat(e.message)}),void postMessage({action:"console",value:"\n\n$ "})}if(!h(s))return postMessage({action:"console",value:"\nErrors in declaration file:"}),h.errors.forEach((function(e){var o='\n\t- "'.concat(e.instancePath,'" ').concat(e.message);postMessage({action:"console",value:o})})),void postMessage({action:"console",value:"\n\n$ "});if(!f().satisfies(c.version,s.builderVersion))return postMessage({action:"console",value:"\nVersion requirements (".concat(s.builderVersion,") don't meet builder version ").concat(c.version,".")}),void postMessage({action:"console",value:"\n\n$ "});try{var l=function(e,o){var n,r="/",i=new t.Container,s=(null===(n=o.options)||void 0===n?void 0:n.logLevel)||"info",l=b.indexOf(s);i.logger.addTransport((function(e,o,n,t){var r="\n[".concat(e,"]\t").concat(o);t>=l&&postMessage({action:"console",value:r})}));var u=a().resolve(r),f=a().resolve(r,o.options.distDir),p=a().resolve(r,o.options.metaDir),v=a().resolve(r,o.options.logPath);i.logger.info("Heta builder of version ".concat(c.version,' initialized in directory "').concat(u,'"')),o.id&&i.logger.info('Platform id: "'.concat(o.id,'"'));var m={};i.logger.info('Compilation of module "'.concat(o.importModule.source,'" of type "').concat(o.importModule.type,'"...'));var h=new t.ModuleSystem(i.logger,(function(o){var n=e[o];if(!n)throw new t.HetaLevelError("Module ".concat(o," is not found."));return g.from(n)})),y=a().resolve(u,o.importModule.source),w=o.importModule.type;h.addModuleDeep(y,w,o.importModule),o.options.debug&&Object.getOwnPropertyNames(h.moduleCollection).forEach((function(e){var o=a().relative(u,e+".json"),n=a().join(p,o),t=JSON.stringify(h.moduleCollection[e],null,2);m[n]=g.from(t,"utf-8"),i.logger.info("Meta file was saved to ".concat(n))}));var k=h.integrate();if(i.loadMany(k,!1),i.logger.info("Setting references in elements, total length "+i.length),i.knitMany(),i.logger.info("Checking for circular references in Records."),i.checkCircRecord(),i.checkCircUnitDef(),i.logger.hasErrors)i.logger.warn("Units checking and export were skipped because of errors in compilation.");else if(o.options.unitsCheck?(i.logger.info("Checking unit's consistency."),i.checkUnits()):i.logger.warn('Units checking skipped. To turn it on set "unitsCheck: true" in declaration.'),i.logger.info("Checking unit's terms."),i.checkTerms(),o.options.skipExport)i.logger.warn("Exporting skipped as stated in declaration.");else if(o.options.juliaOnly){i.logger.warn('"Julia only" mode'),M(new(0,this.container.classes.Julia)({format:"Julia",filepath:"_julia"}),f,m)}else{var O=d(i.exportStorage).map((function(e){return e[1]}));i.logger.info("Start exporting to files, total: ".concat(O.length,".")),O.forEach((function(e){return M(e,f,m)}))}var S=i.hetaErrors();if("always"===o.options.logMode||"error"===o.options.logMode&&S.length>0){if("json"===o.options.logFormat)var j=JSON.stringify(i.defaultLogs,null,2);else j=i.defaultLogs.filter((function(e){return e.levelNum>=l})).map((function(e){return"[".concat(e.level,"]\t").concat(e.msg)})).join("\n");m[v]=g.from(j,"utf-8"),i.logger.info('All logs was saved to file: "'.concat(v,'"'))}i.logger.hasErrors?postMessage({action:"stop",dict:m}):postMessage({action:"finished",dict:m});return i}(o,s)}catch(e){return postMessage({action:"console",value:y+"\n"}),postMessage({action:"console",value:e.stack}),void postMessage({action:"console",value:"\n\n$ "})}l.hetaErrors().length>0?postMessage({action:"console",value:"\nCompilation ERROR! See logs."}):postMessage({action:"console",value:"\nCompilation OK!"}),postMessage({action:"console",value:"\n\n$ "})}else postMessage({action:"console",value:'\n"platform.*" file is not found.\nSTOP!\n\n$ '})}},75042:()=>{},69862:()=>{},40964:()=>{},72095:()=>{},61219:()=>{}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var a=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=n,r.x=()=>{var e=r.O(void 0,[551,227],(()=>r(74189)));return e=r.O(e)},r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},e=[],r.O=(o,n,t,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,t,a]=e[u],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var c=t();void 0!==c&&(o=c)}}return o}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,t,a]},r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var n in o)r.o(o,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((o,n)=>(r.f[n](e,o),o)),[])),r.u=e=>"js/"+e+"."+{227:"2d8f6bd093099c56229a",551:"eea8c3f2fb7db78679f5"}[e]+".js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var o=r.g.document;if(!e&&o&&(o.currentScript&&(e=o.currentScript.src),!e)){var n=o.getElementsByTagName("script");if(n.length)for(var t=n.length-1;t>-1&&!e;)e=n[t--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"})(),(()=>{var e={929:1};r.f.i=(o,n)=>{e[o]||importScripts(r.p+r.u(o))};var o=self.webpackChunkheta_online=self.webpackChunkheta_online||[],n=o.push.bind(o);o.push=o=>{var[t,a,i]=o;for(var s in a)r.o(a,s)&&(r.m[s]=a[s]);for(i&&i(r);t.length;)e[t.pop()]=1;n(o)}})(),o=r.x,r.x=()=>Promise.all([r.e(551),r.e(227)]).then(o);r.x()})();
//# sourceMappingURL=929.b619847a9d6c7ef0eeb2.js.map