{"version":3,"file":"js/260.94a1b38854d1ac496ace.js","mappings":"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","sources":["webpack://heta-online/webpack/runtime/chunk loaded","webpack://heta-online/webpack/runtime/startup chunk dependencies","webpack://heta-online/./src/build.js","webpack://heta-online/webpack/bootstrap","webpack://heta-online/webpack/runtime/amd define","webpack://heta-online/webpack/runtime/amd options","webpack://heta-online/webpack/runtime/compat get default export","webpack://heta-online/webpack/runtime/define property getters","webpack://heta-online/webpack/runtime/ensure chunk","webpack://heta-online/webpack/runtime/get javascript chunk filename","webpack://heta-online/webpack/runtime/get mini-css chunk filename","webpack://heta-online/webpack/runtime/global","webpack://heta-online/webpack/runtime/hasOwnProperty shorthand","webpack://heta-online/webpack/runtime/make namespace object","webpack://heta-online/webpack/runtime/node module decorator","webpack://heta-online/webpack/runtime/publicPath","webpack://heta-online/webpack/runtime/importScripts chunk loading","webpack://heta-online/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([\n\t\t__webpack_require__.e(613),\n\t\t__webpack_require__.e(169)\n\t]).then(next);\n};","import { Container, ModuleSystem, Transpot } from 'heta-compiler/src/webpack';\nimport path from 'path';\nimport declarationSchema from 'heta-compiler/src/builder/declaration-schema.json';\nimport Ajv from 'ajv';\n//const ajvErrors = require('ajv-errors');\nimport hetaCompilerPackage from 'heta-compiler/package.json';\nimport semver from 'semver';\n\nconst reader = new FileReaderSync();\n\nlet ajv = new Ajv({allErrors: true, useDefaults: true});\najv.addKeyword({\n    keyword: \"example\",\n    type: \"string\",\n});\n//ajvErrors(ajv, {singleError: false}); // this is required for custom messages see https://ajv.js.org/packages/ajv-errors.html\nconst validate = ajv.compile(declarationSchema);\n\nlet contactMessage = `\n +-------------------------------------------------------------------+ \n | Internal \"Heta compiler\" error, contact the developers.           | \n | Create an issue: ${hetaCompilerPackage.bugs.url} | \n | or mail to: ${hetaCompilerPackage.bugs.email}                                     | \n +-------------------------------------------------------------------+ \n`;\n\nself.onmessage = (evt) => {\n    let inputDict = evt.data.files;\n    // first lines in console\n    postMessage({action: 'console', value: 'heta build', append: true});\n    postMessage({action: 'console', value: '\\nRunning compilation with declaration file \"/platform.json\"...', append: true});\n\n    // create declaration\n    let declarationFile = inputDict['/platform.json'];\n    let declarationText = reader.readAsText(declarationFile);\n    try {\n        var declaration = JSON.parse(declarationText);\n    } catch (e) {\n        postMessage({action: 'console', value: `\\nDeclaration file must be JSON formatted:`, append: true});\n        postMessage({action: 'console', value: `\\n\\t- ${e.message}`, append: true});\n        \n        postMessage({action: 'console', value: '\\n\\n$ ', append: true});\n        return;\n    }\n\n    // validate and set defaults\n    let valid = validate(declaration);\n    if (!valid) { // analyze errors\n        postMessage({action: 'console', value: '\\nErrors in declaration file:', append: true});\n        validate.errors.forEach((ajvError) => {\n            let msg = `\\n\\t- \"${ajvError.instancePath}\" ${ajvError.message}`;\n            postMessage({action: 'console', value: msg, append: true});\n        });\n\n        postMessage({action: 'console', value: '\\n\\n$ ', append: true});\n        return;\n    }\n\n    // === wrong version throws, if no version stated than skip ===\n    let satisfiesVersion = semver.satisfies(hetaCompilerPackage.version, declaration.builderVersion);\n    if (!satisfiesVersion) {\n        postMessage({action: 'console', value: `\\nVersion requirements (${declaration.builderVersion}) don't meet builder version ${hetaCompilerPackage.version}.`, append: true});\n        \n        postMessage({action: 'console', value: '\\n\\n$ ', append: true});\n        return;\n    }\n\n    // === this part displays \"send errors to developer\" message ===\n    try {\n        var container = build(inputDict, declaration);\n    } catch(error) {\n        postMessage({action: 'console', value: contactMessage + '\\n', append: true});\n        postMessage({action: 'console', value: error.stack, append: true});\n\n        postMessage({action: 'console', value: '\\n\\n$ ', append: true});\n        return;\n    }\n\n    if (container.hetaErrors().length > 0) {\n        postMessage({action: 'console', value: '\\nCompilation ERROR! See logs.', append: true});\n    } else {\n        postMessage({action: 'console', value: '\\nCompilation OK!', append: true});\n    }\n\n    postMessage({action: 'console', value: '\\n\\n$ ', append: true});\n};\n\nfunction build(inputDict, settings) { // modules, exports\n    let coreDirname = '/';\n    /*\n        constructor()\n    */\n\n    // create container and logger\n    let c = new Container();\n    /*\n    c.logger.addTransport((level, msg, opt, levelNum) => { // temporal solution, all logs to console\n        console.log(`{heta-compiler} [${level}]\\t${msg}`);\n    });\n    */\n    c.logger.addTransport((level, msg, opt, levelNum) => {\n        let value = `\\n[${level}]\\t${msg}`;\n\n        postMessage({action: 'console', value: value, append: true});\n    });\n\n    // file paths\n    let _coreDirname = path.resolve(coreDirname);\n    let _distDirname = path.resolve(coreDirname, settings.options.distDir);\n    let _metaDirname = path.resolve(coreDirname, settings.options.metaDir);\n    let _logPath = path.resolve(coreDirname, settings.options.logPath);\n\n    c.logger.info(`Heta builder of version ${hetaCompilerPackage.version} initialized in directory \"${_coreDirname}\"`);\n    if (settings.id) c.logger.info(`Platform id: \"${settings.id}\"`);\n\n    /*\n        run()\n    */\n    let outputDict = {};\n    c.logger.info(`Compilation of module \"${settings.importModule.source}\" of type \"${settings.importModule.type}\"...`);\n\n    // 1. Parsing\n    let ms = new ModuleSystem(c.logger, (filename) => {\n        let file = inputDict[filename];\n        if (!file) {\n            throw new Error(`File ${filename} is not found.`);\n        }\n        let arrayBuffer = reader.readAsArrayBuffer(file);\n        \n        return Buffer.from(arrayBuffer);\n    });\n    let sourceFilepath = path.resolve(_coreDirname, settings.importModule.source);\n    let sourceType = settings.importModule.type;\n    ms.addModuleDeep(sourceFilepath, sourceType, settings.importModule);\n\n    // 2. Modules integration\n    if (settings.options.debug) {\n        Object.getOwnPropertyNames(ms.moduleCollection).forEach((name) => {\n            let relPath = path.relative(_coreDirname, name + '.json');\n            let absPath = path.join(_metaDirname, relPath);\n            let str = JSON.stringify(ms.moduleCollection[name], null, 2);\n            outputDict[absPath] = new File([str], name + '.json'); // add meta as file\n            c.logger.info(`Meta file was saved to ${absPath}`);\n        });\n    }\n    let qArr = ms.integrate();\n    \n    // 3. Translation\n    c.loadMany(qArr, false);\n    \n    // 4. Binding\n    c.logger.info('Setting references in elements, total length ' + c.length);\n    c.knitMany();\n    \n    // 5. Circular start_ and ode_\n    c.logger.info('Checking for circular references in Records.');\n    c.checkCircRecord();\n    \n    // 6. check circ UnitDef\n    c.checkCircUnitDef();\n\n    \n    // === STOP if errors ===\n    if (!c.logger.hasErrors) {\n\n        // 7. Units checking\n        if (settings.options.unitsCheck) {\n          c.logger.info('Checking unit\\'s consistency.');\n          c.checkUnits();\n        } else {\n          c.logger.warn('Units checking skipped. To turn it on set \"unitsCheck: true\" in declaration.');\n        }\n\n        // 8. Terms checking\n        c.logger.info('Checking unit\\'s terms.');\n        c.checkTerms();\n\n        // 9. Exports\n        // save\n        if (settings.options.skipExport) {\n            c.logger.warn('Exporting skipped as stated in declaration.');\n        } else if (settings.options.juliaOnly) {\n            c.logger.warn('\"Julia only\" mode');\n            //this.exportJuliaOnly(); \n            // create export without putting it to exportStorage\n            let Julia = this.container.classes['Julia'];\n            let exportItem = new Julia({\n                format: 'Julia',\n                filepath: '_julia'\n            });\n\n            _makeAndSave(exportItem, _distDirname, outputDict);\n        } else {\n            //this.exportMany();\n            let exportElements = [...c.exportStorage].map((x) => x[1]);\n            c.logger.info(`Start exporting to files, total: ${exportElements.length}.`);\n\n            exportElements.forEach((exportItem) => _makeAndSave(exportItem, _distDirname, outputDict));\n        }\n      } else {\n        c.logger.warn('Units checking and export were skipped because of errors in compilation.');\n      }\n\n    // 10. save logs if required\n    let hetaErrors = c.hetaErrors();\n    let createLog = settings.options.logMode === 'always' \n      || (settings.options.logMode === 'error' && hetaErrors.length > 0);\n    if (createLog) {\n      switch (settings.options.logFormat) {\n      case 'json':\n        var logs = JSON.stringify(c.defaultLogs, null, 2);\n        break;\n      default: \n        logs = c.defaultLogs\n          .map(x => `[${x.level}]\\t${x.msg}`)\n          .join('\\n');  \n      }\n\n      //fs.outputFileSync(_logPath, logs);\n      outputDict[_logPath] = new File([logs], _logPath, { type: \"text/plain\" });\n      c.logger.info(`All logs was saved to file: \"${_logPath}\"`);\n    }\n\n    if (!c.logger.hasErrors) {\n        postMessage({action: 'finished', dict: outputDict});\n    } else {\n        postMessage({action: 'stop', dict: outputDict});\n    }\n    \n    return c;\n}\n\nfunction _makeAndSave(exportItem, distDirectory, outputDict) {\n    let logger = exportItem._container.logger;\n    let filepath0 = path.resolve(distDirectory, exportItem.filepath); // /dist/matlab\n    let msg = `Exporting to \"${filepath0}\" of format \"${exportItem.format}\"...`;\n    logger.info(msg);\n\n    let mmm = exportItem.make();\n\n    mmm.forEach((out) => {\n        let filepath = filepath0 + out.pathSuffix; // /dist/matlab/run.jl\n        try {\n            outputDict[filepath] = new File([out.content], filepath);\n        } catch (e) {\n            let msg =`Heta compiler cannot export to file: \"${filepath}\": \\n\\t- ${e.message}`;\n            logger.error(msg, {type: 'ExportError'});\n        }\n    });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [613,169], () => (__webpack_require__(74189)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"169\":\"a5ec186cd838b778dd28\",\"613\":\"d344745b0faa3507eada\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t260: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkheta_online\"] = self[\"webpackChunkheta_online\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","reader","FileReaderSync","ajv","Ajv","allErrors","useDefaults","addKeyword","keyword","type","validate","compile","declarationSchema","contactMessage","concat","hetaCompilerPackage","_makeAndSave","exportItem","distDirectory","outputDict","logger","_container","filepath0","path","filepath","msg","format","info","make","forEach","out","pathSuffix","File","content","e","message","error","self","onmessage","evt","inputDict","data","files","postMessage","action","value","append","declarationFile","declarationText","readAsText","declaration","JSON","parse","errors","ajvError","instancePath","semver","builderVersion","container","settings","coreDirname","c","Container","addTransport","level","opt","levelNum","_coreDirname","_distDirname","options","distDir","_metaDirname","metaDir","_logPath","logPath","id","importModule","source","ms","ModuleSystem","filename","file","Error","arrayBuffer","readAsArrayBuffer","Buffer","from","sourceFilepath","sourceType","addModuleDeep","debug","Object","getOwnPropertyNames","moduleCollection","name","relPath","absPath","str","stringify","qArr","integrate","loadMany","length","knitMany","checkCircRecord","checkCircUnitDef","hasErrors","warn","unitsCheck","checkUnits","checkTerms","skipExport","juliaOnly","Julia","this","classes","exportElements","_toConsumableArray","exportStorage","map","x","hetaErrors","logMode","logFormat","logs","defaultLogs","join","dict","build","stack","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","__webpack_exports__","O","amdD","amdO","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","replace","p","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","push","bind","moreModules","runtime","pop","then"],"sourceRoot":""}